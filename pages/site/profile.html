<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Профиль — SOKEMI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="/styles.css">

<style>

.profile-container {
    width: 80%;
    margin: 0 auto;
}

.profile-layout {
    display: grid;
    grid-template-columns: 320px 1fr;
    gap: 60px;
}

/* SIDEBAR */

.profile-sidebar {
    background: #8BA3C5;
    border-radius: var(--radius-xl);
    padding: 40px;
    text-align: center;
    color: white;
    box-shadow: var(--shadow-lg);
}

.avatar {
    width: 130px;
    height: 130px;
    border-radius: 50%;
    overflow: hidden;
    margin: 0 auto 20px;
    border: 5px solid white;
    box-shadow: var(--shadow-md);
}

.avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.profile-name {
    font-family: var(--font-display);
    font-size: 24px;
    margin-bottom: 6px;
}

.profile-email {
    font-size: 14px;
    opacity: 0.9;
    margin-bottom: 30px;
}

.profile-menu button {
    width: 100%;
    padding: 12px;
    border-radius: 50px;
    margin-bottom: 12px;
    background: white;
    color: #8BA3C5;
    font-weight: 500;
    transition: var(--transition-normal);
}

.profile-menu button:hover,
.profile-menu button.active {
    background: #6f8db6;
    color: white;
}

/* CONTENT */

.profile-content {
    background: #8BA3C5;
    border-radius: var(--radius-xl);
    padding: 50px;
    color: white;
    box-shadow: var(--shadow-lg);
}

.profile-card h3 {
    font-family: var(--font-display);
    margin-bottom: 20px;
}

.profile-card p {
    margin-bottom: 10px;
    font-size: 15px;
}

/* ORDERS */

.order-item {
    background: rgba(255,255,255,0.25);
    padding: 16px 20px;
    border-radius: 20px;
    margin-bottom: 15px;
    backdrop-filter: blur(4px);
    cursor: pointer;
}

.order-status {
    float: right;
    background: white;
    color: #8BA3C5;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 12px;
}

.order-modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    padding: 20px;
}

.order-modal.active {
    display: flex;
}

.order-modal-card {
    background: white;
    color: #2b2b2b;
    border-radius: 20px;
    width: min(720px, 100%);
    max-height: 80vh;
    overflow: auto;
    padding: 24px;
    box-shadow: var(--shadow-lg);
}

.order-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
}

.order-modal-title {
    font-family: var(--font-display);
    font-size: 22px;
}

.order-modal-close {
    border: none;
    background: #eef1f6;
    border-radius: 12px;
    padding: 6px 10px;
    cursor: pointer;
}

.order-modal-section {
    margin-bottom: 16px;
}

.order-items-list {
    display: grid;
    gap: 10px;
}

.order-item-row {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 8px;
    border: 1px solid #e6e6e6;
    border-radius: 12px;
    padding: 10px 12px;
}

.order-item-row strong {
    display: block;
    margin-bottom: 4px;
}

/* HIDE TABS */
.hidden {
    display: none;
}

/* RESPONSIVE */
@media (max-width: 1023px) {
    .profile-container {
        width: 92%;
    }

    .profile-layout {
        grid-template-columns: 1fr;
    }

    .profile-content {
        padding: 32px 24px;
    }
}

@media (max-width: 639px) {
    .profile-sidebar {
        padding: 28px 20px;
    }
}

</style>
</head>

<body>

<header>
    <div class="header">
        <div class="container header-container">
            <a href="/index.html" class="logo">
                <img src="/images/logo.svg" alt="Sokemi" class="logo-image">
            </a>
            
            <nav class="nav">
                <a href="/pages/site/about.html" class="nav-link">&#1054; &#1085;&#1072;&#1089;</a>
                <a href="/index.html" class="nav-link">&#1043;&#1083;&#1072;&#1074;&#1085;&#1072;&#1103;</a>
                <a href="/pages/site/catalogue.html" class="nav-link">&#1050;&#1072;&#1090;&#1072;&#1083;&#1086;&#1075;</a>
                <a href="/pages/site/contacts.html" class="nav-link">&#1050;&#1086;&#1085;&#1090;&#1072;&#1082;&#1090;&#1099;</a>
            </nav>
            
            <div class="header-actions">
                <div class="search-wrapper">
                    <input type="text" placeholder="Поиск..." class="search-input">
                    <button class="search-btn" type="button">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    </button>
                </div>
                <a href="/pages/site/profile.html" class="header-avatar">
                    <img src="https://basket-25.wbbasket.ru/vol4435/part443550/443550372/images/big/1.webp" alt="profile">
                </a>
                <a href="/pages/site/favorites.html" class="icon-btn favorites-btn" aria-label="Избранное">
                    <span class="icon-like" aria-hidden="true"></span>
                </a>
                <a href="/pages/site/cart.html" class="icon-btn cart-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>

                    <!-- ВОТ ЭТО ДОБАВИТЬ -->
                    <span class="cart-count-badge" id="cart-count-badge">0</span>
                </a>
                <button class="mobile-menu-btn" aria-label="Открыть меню" type="button">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </div>
</header>

<!-- MOBILE MENU -->
<div class="mobile-menu">
    <div class="mobile-menu-header">
        <a href="/index.html" class="logo">
            <img src="/images/logo.svg" alt="Sokemi" class="logo-image">
        </a>
        <button class="mobile-menu-close" aria-label="Закрыть меню">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6 6 18"></path>
                <path d="m6 6 12 12"></path>
            </svg>
        </button>
    </div>
    <nav class="mobile-nav">
        <a href="/pages/site/about.html" class="mobile-nav-link">&#1054; &#1085;&#1072;&#1089;</a>
        <a href="/index.html" class="mobile-nav-link">&#1043;&#1083;&#1072;&#1074;&#1085;&#1072;&#1103;</a>
        <a href="/pages/site/catalogue.html" class="mobile-nav-link">&#1050;&#1072;&#1090;&#1072;&#1083;&#1086;&#1075;</a>
        <a href="/pages/site/contacts.html" class="mobile-nav-link">&#1050;&#1086;&#1085;&#1090;&#1072;&#1082;&#1090;&#1099;</a>
    </nav>
</div>
<div class="mobile-overlay"></div>

<div class="order-modal" id="order-modal" aria-hidden="true">
    <div class="order-modal-card" role="dialog" aria-modal="true" aria-labelledby="order-modal-title">
        <div class="order-modal-header">
            <div class="order-modal-title" id="order-modal-title">Детали заказа</div>
            <button type="button" class="order-modal-close" id="order-modal-close">Закрыть</button>
        </div>
        <div id="order-modal-content"></div>
    </div>
</div>

<main class="main">

<div class="profile-container">

    <div class="section-header">
        <h2 class="section-title">МОЙ ПРОФИЛЬ</h2>
    </div>

    <div class="profile-layout">

        <!-- SIDEBAR -->
        <div class="profile-sidebar">

            <div class="avatar">
                <img src="https://basket-25.wbbasket.ru/vol4435/part443550/443550372/images/big/1.webp" alt="avatar">
            </div>

            <div class="profile-name">Анна Кузнецова</div>
            <div class="profile-email">anna@email.ru</div>

            <div class="profile-menu">
                <button class="tab-btn active" data-tab="info">Личные данные</button>
                <button class="tab-btn" data-tab="orders">История заказов</button>
                <button class="tab-btn" data-tab="settings">Настройки</button>
            </div>

        </div>

        <!-- CONTENT -->
        <div class="profile-content">

            <div id="info" class="tab-content">
                <div class="profile-card">
                    <h3>Основная информация</h3>
                    <p><strong>Имя:</strong> Анна</p>
                    <p><strong>Фамилия:</strong> Кузнецова</p>
                    <p><strong>Телефон:</strong> +7 (999) 123-45-67</p>
                    <p><strong>Город:</strong> Москва</p>
                </div>
            </div>

            <div id="orders" class="tab-content hidden">
                <div class="profile-card">
                    <h3>История заказов</h3>
                    <div id="orders-list"></div>
                </div>
            </div>

            <div id="settings" class="tab-content hidden">
                <div class="profile-card">
                    <h3>Настройки аккаунта</h3>
                    <button class="btn btn-primary">Сменить пароль</button>
                </div>
            </div>

        </div>
    </div>
</div>

</main>

<footer class="footer">
    <div class="container">
        <div class="newsletter">
            <div class="newsletter-left">
                <h3 class="newsletter-title">Готовы узнавать о новинках?</h3>
                <form class="newsletter-form">
                    <input type="email" placeholder="Ваш Email" class="newsletter-input">
                    <button type="submit" class="btn btn-primary">Отправить</button>
                </form>
            </div>
            <div class="newsletter-right">
                <h4 class="newsletter-subtitle">Товары для дома и питомцев</h4>
                <p class="newsletter-text">Мы подберём лучшие решения для вашего любимца и создадим комфорт вместе с вами.</p>
            </div>
        </div>

        <div class="footer-links">
            <div class="footer-column">
                <h4 class="footer-column-title">О компании</h4>
                <ul class="footer-list">
                    <li><a href="#">Блог</a></li>
                    <li><a href="#">Наша команда</a></li>
                    <li><a href="#">Контакты</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4 class="footer-column-title">Поддержка</h4>
                <ul class="footer-list">
                    <li><a href="#">Связаться с нами</a></li>
                    <li><a href="#">Доставка</a></li>
                    <li><a href="#">Возврат</a></li>
                    <li><a href="#">FAQ</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4 class="footer-column-title">Социальные сети</h4>
                <div class="socials">
                    <a href="#" class="social-link">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M15.684 0H8.316C1.592 0 0 1.592 0 8.316v7.368C0 22.408 1.592 24 8.316 24h7.368C22.408 24 24 22.408 24 15.684V8.316C24 1.592 22.408 0 15.684 0zm3.692 17.123h-1.744c-.66 0-.864-.525-2.05-1.727-1.033-1-1.49-1.135-1.744-1.135-.356 0-.458.102-.458.593v1.575c0 .424-.135.678-1.253.678-1.846 0-3.896-1.118-5.335-3.202C4.624 10.857 4 8.673 4 8.231c0-.254.102-.491.593-.491h1.744c.44 0 .61.203.78.677.863 2.49 2.303 4.675 2.896 4.675.22 0 .322-.102.322-.66V9.721c-.068-1.186-.695-1.287-.695-1.71 0-.203.17-.407.44-.407h2.744c.373 0 .508.203.508.643v3.473c0 .372.17.508.271.508.22 0 .407-.136.814-.542 1.27-1.422 2.176-3.61 2.176-3.61.119-.254.322-.491.763-.491h1.744c.525 0 .644.27.525.643-.22 1.017-2.354 4.031-2.354 4.031-.186.305-.254.44 0 .78.186.254.796.779 1.203 1.253.745.847 1.32 1.558 1.473 2.05.17.49-.085.744-.576.744z"/>
                        </svg>
                        VK
                    </a>
                    <a href="#" class="social-link">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                        </svg>
                        Telegram
                    </a>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">© 2026 SOKEMI. Все права защищены.</p>
            <div class="legal-links">
                <a href="#">Пользовательское соглашение</a>
                <a href="#">Политика конфиденциальности</a>
            </div>
        </div>
    </div>
</footer>

<script src="/script.js"></script>
<script>
const buttons = document.querySelectorAll('.tab-btn');
const tabs = document.querySelectorAll('.tab-content');

buttons.forEach(btn => {
    btn.addEventListener('click', () => {
        buttons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        tabs.forEach(tab => tab.classList.add('hidden'));
        document.getElementById(btn.dataset.tab).classList.remove('hidden');
    });
});


function renderOrders() {
    const list = document.getElementById("orders-list");
    if (!list) return;

    let orders = [];
    try {
        const raw = localStorage.getItem("sokemi.orders");
        const parsed = raw ? JSON.parse(raw) : [];
        orders = Array.isArray(parsed) ? parsed : [];
    } catch {
        orders = [];
    }

    if (!orders.length) {
        list.innerHTML = '<p>Заказов пока нет</p>';
        return;
    }

    list.innerHTML = orders
        .map((order) => {
            const itemsCount = Array.isArray(order.items) ? order.items.reduce((sum, item) => sum + (Number(item.quantity) || 0), 0) : 0;
            const total = Number(order.total) || 0;
            const status = order.status || "Обработка";
            return `
                <div class="order-item" data-order-id="${order.id}">
                    Заказ №${order.id} — ${itemsCount} товаров на ${new Intl.NumberFormat("ru-RU").format(total)} ₽
                    <span class="order-status">${status}</span>
                </div>
            `;
        })
        .join("");
}

renderOrders();

const ordersList = document.getElementById("orders-list");
const orderModal = document.getElementById("order-modal");
const orderModalContent = document.getElementById("order-modal-content");
const orderModalClose = document.getElementById("order-modal-close");

function readOrders() {
    try {
        const raw = localStorage.getItem("sokemi.orders");
        const parsed = raw ? JSON.parse(raw) : [];
        return Array.isArray(parsed) ? parsed : [];
    } catch {
        return [];
    }
}

function openOrderModal(order) {
    if (!orderModal || !orderModalContent) return;
    const items = Array.isArray(order.items) ? order.items : [];
    const total = Number(order.total) || 0;
    const createdAt = order.createdAt ? new Date(order.createdAt) : null;
    const dateText = createdAt && !Number.isNaN(createdAt.getTime())
        ? createdAt.toLocaleString("ru-RU")
        : "—";

    orderModalContent.innerHTML = `
        <div class="order-modal-section">
            <strong>Статус:</strong> ${order.status || "Обработка"}
        </div>
        <div class="order-modal-section">
            <strong>Дата:</strong> ${dateText}
        </div>
        <div class="order-modal-section">
            <strong>Контакты:</strong> ${order.customer?.name || "—"}, ${order.customer?.phone || "—"}, ${order.customer?.email || "—"}
        </div>
        <div class="order-modal-section">
            <strong>Адрес:</strong> ${order.customer?.address || "—"}
        </div>
        <div class="order-modal-section">
            <strong>Состав заказа:</strong>
            <div class="order-items-list">
                ${items.map((item) => `
                    <div class="order-item-row">
                        <div>
                            <strong>${item.name || "Товар"}</strong>
                            Кол-во: ${Number(item.quantity) || 1}
                        </div>
                        <div>${new Intl.NumberFormat("ru-RU").format((Number(item.price) || 0) * (Number(item.quantity) || 1))} ₽</div>
                    </div>
                `).join("")}
            </div>
        </div>
        <div class="order-modal-section">
            <strong>Итого:</strong> ${new Intl.NumberFormat("ru-RU").format(total)} ₽
        </div>
    `;
    orderModal.classList.add("active");
    orderModal.setAttribute("aria-hidden", "false");
}

function closeOrderModal() {
    if (!orderModal) return;
    orderModal.classList.remove("active");
    orderModal.setAttribute("aria-hidden", "true");
}

ordersList?.addEventListener("click", (event) => {
    const target = event.target;
    if (!(target instanceof HTMLElement)) return;
    const item = target.closest(".order-item");
    if (!item) return;
    const id = item.getAttribute("data-order-id");
    if (!id) return;
    const orders = readOrders();
    const order = orders.find((o) => o.id === id);
    if (order) openOrderModal(order);
});

orderModalClose?.addEventListener("click", closeOrderModal);
orderModal?.addEventListener("click", (event) => {
    if (event.target === orderModal) closeOrderModal();
});
document.addEventListener("keydown", (event) => {
    if (event.key === "Escape") closeOrderModal();
});
</script>

</body>
</html>


